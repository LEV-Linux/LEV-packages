# Template file for 'slock'
pkgname=lev-slock
version=1.1
revision=1
hostmakedepends="pkg-config"
makedepends="libXrandr-devel libXinerama-devel imlib2-devel"
short_desc="LEV Linux's fork of slock - Simple screen locker for X"
maintainer="SalahDin Rezk <salah2112004@gmail.com>"
license="MIT"
homepage="https://lev-linux.github.io/"
distfiles="https://github.com/lev-linux/slock/archive/refs/tags/v${version}.tar.gz"
checksum=071fd8b0706a8c5e5c94ec21eac5d64c661158bbf17df9c9202ffb0068d93286

do_build() {
	[ -e ${FILESDIR}/config.h ] && cp ${FILESDIR}/config.h config.h
	sed -i 's/CPPFLAGS =/CPPFLAGS +=/g' config.mk
	sed -i 's/CFLAGS =/CFLAGS +=/g' config.mk
	sed -i 's/LDFLAGS =/LDFLAGS +=/g' config.mk
	make CC=$CC INCS="-I." LIBS="-lX11 -lXext -lcrypt -lXrandr -lXinerama -lImlib2" ${makejobs}
}

do_install() {
	make PREFIX=/usr DESTDIR=$DESTDIR install
	vlicense LICENSE
}
